<?xml version="1.0" encoding="UTF-8" ?>
<!--
  ~ Copyright (c) 2017. RMSoft Co.,Ltd. All rights reserved
  -->

<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="rmsoft.ams.seoul.wf.wf001.dao.Wf001Mapper">
    <select id="findAllJob" resultType="Wf00101VO" parameterType="Wf00101VO" statementType="PREPARED">
        SELECT
            Z.JOB_UUID as jobUuid,
            Z.JOB_NAME as jobName,
            Z.API as api,
            Z.DESCRIPTION description,
            Z.NOTES notes,
            Z.USE_YN useYn,
            <include refid="Common.UserName">
                <property name="userUuid" value="Z.INSERT_UUID"/>
            </include>
            as insertUuid,
            Z.INSERT_DATE as insertDate,
            <include refid="Common.UserName">
                <property name="userUuid" value="Z.UPDATE_UUID"/>
            </include>
            as updateUuid,
            Z.UPDATE_DATE as updateDate
        FROM
            WF_JOB Z
        <where>
            <if test="jobName != null">
                Z.JOB_NAME LIKE '%' || #{jobName} || '%'
            </if>
            <if test="api != null">
                AND Z.API LIKE '%' || #{api} || '%'
            </if>
            <if test="useYn != null">
                AND Z.USE_YN = #{useYn}
            </if>
        </where>
    </select>

    <select id="findParameter" resultType="Wf00102VO" parameterType="String"
            statementType="PREPARED">
        SELECT
            Z1.PARAMETER_UUID as parameterUuid,
            Z1.JOB_UUID as jobUuid,
            Z1.PARAMETER_NAME as parameterName,
            Z1.DATA_TYPE_UUID as dataTypeUuid,
            Z1.IN_OUT_UUID as inOutUuid,
            Z1.DEFAULT_VALUE as defaultValue,
            Z1.DISPLAY_YN as displayYn,
            Z1.REQUIRED_YN as requiredYn,
            Z1.DESCRIPTION as description,
            Z1.NOTES as notes,
            Z1.USE_YN as useYn,
            <include refid="Common.UserName">
                <property name="userUuid" value="Z1.INSERT_UUID"/>
            </include>
            as insertUuid,
            Z1.INSERT_DATE insertDate,
            <include refid="Common.UserName">
                <property name="userUuid" value="Z1.UPDATE_UUID"/>
            </include>
            as updateUuid,
            Z1.UPDATE_DATE updateDate
        FROM
            WF_PARAMETER Z1
        WHERE Z1.JOB_UUID = #{jobUuid}
    </select>
</mapper>