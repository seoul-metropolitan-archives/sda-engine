<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{/layout/empty}">
<head>
    <style>
        .ax-body.login {
            background: url([[@{${@environment.getProperty('config.background.amslogin')}}]]) center center;
        background-size: cover;
        color: #ccc;
        }
        .ax5-ui-dialog .ax-dialog-body .ax-dialog-msg {
            color: black;
        }
    </style>
    <script type="text/javascript">
        axboot.requireSession('[[@{${@environment.getProperty("config.sessionCookie")}}]]');

        $(function() {
            var images = ['bg_login02.jpg', 'bg_login01.jpg', 'bg_login03.jpg'];
            $('.ax-body.login').css({'background': 'url(assets/images/' + images[Math.floor(Math.random() * images.length)] + ')'});
        });

        var fnObj = {
            login: function () {
                axboot.ajax({
                    method: "POST",
                    url: "/api/login",
                    data: JSON.stringify({
                        "userId": $("#userId").val(),
                        "userPassword": $("#userPassword").val()
                    }),
                    callback: function (res) {
                        location.href = "/login";
                    },
                    options: {
                        nomask: false, apiType: "login",
                        onError: function(err){
                            axDialog.alert({
                                title: '로그인 실패',
                                theme: "default",
                                msg: err.message
                            });
                        }
                    }
                });
                return false;
            }
        };
    </script>
</head>

<body layout:fragment="body" class="ax-body login">
<script>
    $.backstretch([
        "assets/images/bg_login01.jpg",
        "assets/images/bg_login02.jpg",
        "assets/images/bg_login03.jpg"
    ],{duration:3000, fade:1000});
</script>
<div id="wrap" >
    <div id="container" class="hc vc">
        <div id="header">
            <h1 class="h_logo">&nbsp;</h1>
        </div>

        <div id="scontent">
            <form name="login-form" class="" method="post" action="/api/login" onsubmit="return fnObj.login();" autocomplete="off">
                <div class="blind">로그인</div>
                <div class="input_row">
                        <span class="input_box">
                            <label class="lbl">아이디</label>
                            <input type="text" id="userId" name="userId" placeholder="아이디" class="int" maxlength="41" tabindex="1" required="required" autofocus="autofocus" >
                        </span>
                </div>
                <div class="input_row">
                        <span class="input_box">
                            <label class="lbl">비밀번호</label>
                            <input type="password" name="userPassword" id="userPassword" placeholder="비밀번호" class="int" maxlength="16" tabindex="2">
                        </span>
                </div>
                <input type="submit" title="로그인"  value="로그인" class="btn_login" >
            </form>
        </div>
    </div>
</div>
</body>
</html>